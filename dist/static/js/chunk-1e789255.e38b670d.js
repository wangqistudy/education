(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e789255"],{"1b80":function(t,e,a){"use strict";a("8e6e"),a("ac6a"),a("456d");var n=a("bd86"),r=a("5f87"),i=a("2f62");function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var s=a("4328");e["a"]={data:function(){return{totalCount:0,pageSize:10,currPage:1,tableData:[],pageLoading:!0,totalPage:1,dataFilters:{}}},computed:l({},Object(i["c"])(["roles"])),methods:{getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dataFilters;return this.pageLoading=!0,new Promise((function(a,n){e=Object.assign({},e),void 0===e.page&&(e.page=t.currPage),void 0===e.page_num&&(e.page_num=t.pageSize),t.listApi(e).then((function(e){void 0!==e.code&&(t.tableData=e.data.data?e.data.data:[],t.setPagination(e.data.meta.pagination),t.pageLoading=!1),a(e)})).catch((function(e){t.pageLoading=!1,n(e)}))}))},setPagination:function(t){if(t){var e=t.total,a=t.per_page,n=t.current_page,r=t.total_pages;this.totalCount=e-0,this.pageSize=a-0,this.currPage=n-0,this.totalPage=r-0}},handleCurrentChange:function(t){return this.currPage=t,this.getList()},setDataFilters:function(t){this.$set(this,"dataFilters",t)},handleExport:function(t){var e=this,a=Object(r["a"])(),n=Object.assign({},this.dataFilters,{is_export:1}),i={responseType:"blob"};n.token=a,n=s.stringify(n),this.$http.post(t,n,i).then((function(t){var a,n=t.headers;a=n.exportexcelname?decodeURI(n.exportexcelname):"excel.xlsx",e.download(t.data,a)}))},download:function(t,e){if(t){var a=window.URL.createObjectURL(new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),n=document.createElement("a");n.style.display="none",n.href=a;var r=e||"excel.xlsx";n.setAttribute("download",r),document.body.appendChild(n),n.click()}},proxy_handleDelete:function(t,e,a){var n=this;this.$confirm("即将".concat(a||"删除该条记录",", 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n[e]&&n[e](t)})).catch((function(){}))}}}},6594:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment-set-wrap page-wrap"},[a("div",{staticClass:"common-set  page-inner"},[a("p",{staticClass:"set-header page-header"},[t._v("\n            广告位设置\n        ")]),t._v(" "),a("div",{staticClass:"page-table"},[a("el-table",{attrs:{data:t.tableData,"header-row-class-name":"headrow","header-cell-class-name":"headrowcell"}},[a("el-table-column",{attrs:{prop:"id",label:"序号","header-align":"center",align:"center",width:"50px"}}),t._v(" "),a("el-table-column",{attrs:{label:"类别","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("filterTypeName")(e.row.type)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题","header-align":"center",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"图片","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"imgWrap img-item"},[a("img",{attrs:{src:e.row.banner_url,alt:""}}),t._v(" "),a("p",{staticClass:"img-opt"},[a("span",{on:{click:function(a){return t.handlePictureCardPreview(e.row)}}},[a("i",{staticClass:"el-icon-zoom-in"})])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"dest_url",label:"链接","header-align":"center",align:"center"}}),t._v(" "),t.hasEditPermission?a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("\n                      修改\n                    ")])]}}],null,!1,3627794097)}):t._e()],1)],1)]),t._v(" "),a("el-dialog",{attrs:{visible:t.showEdit,width:"526px","close-on-click-modal":!1,title:"修改信息"},on:{"update:visible":function(e){t.showEdit=e}}},[a("el-form",{ref:"formData",attrs:{model:t.formData,"label-width":"80px",rules:t.formRule}},[a("el-form-item",{attrs:{label:"标题：",prop:"title"}},[a("el-input",{model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图片：",prop:"banner_url"}},[a("uploadImg",{attrs:{desc:"上传图片推荐尺寸：1920×220",actionUrl:"/api"+t.apiList.banner_upload,files:t.imgList},model:{value:t.imgList,callback:function(e){t.imgList=e},expression:"imgList"}})],1),t._v(" "),1==t.formData.type?a("el-form-item",{attrs:{label:"链接",prop:"dest_url"}},[a("el-input",{model:{value:t.formData.dest_url,callback:function(e){t.$set(t.formData,"dest_url",e)},expression:"formData.dest_url"}})],1):t._e()],1),t._v(" "),a("div",{staticClass:"subBtn"},[a("el-button",{attrs:{type:"success"},on:{click:t.handleSub}},[t._v("确定")])],1)],1)],1)},r=[],i=(a("456d"),a("ac6a"),a("cc96")),o=a("40cb"),l=a("60c5"),s=a("1b80"),c=a("7c15"),u={name:"adSet",components:{editorCom:i["a"],uploadImg:o["a"],filterCom:l["a"]},mixins:[s["a"]],data:function(){var t=this,e=function(t,e,a){if(!e)return a(new Error("请填写标题"));a()},a=function(t,e,a){if(!e)return a(new Error("请上传图片"));a()},n=function(e,a,n){if(1!=t.formData.type)return n();var r=/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\*\+,;=.]+$/;return a?r.test(a)?void n():n(new Error("链接格式不正确")):n()};return{imgList:[],listApi:c["b"].banner_list,formData:{title:"",banner_url:"",dest_url:"",id:"",created_at:"",updated_at:""},formRule:{title:[{validator:e}],banner_url:[{validator:a}],dest_url:[{validator:n}]},showEdit:!1,apiList:c["a"]}},filters:{filterTypeName:function(t){var e={1:"首页banner图",2:"教师banner图",3:"新闻资讯",4:"关于我们"};return e[t]}},mounted:function(){this.getList()},methods:{handleSub:function(){var t=this,e=this.imgList[0]?this.imgList[0].url:"";this.formData.banner_url=e,this.$refs.formData.validate((function(a){if(a){var n=JSON.parse(JSON.stringify(t.formData));n.banner_url=e,c["b"].banner_save(n).then((function(e){t.showEdit=!1,t.getList()}))}}))},handlePictureCardPreview:function(t){this.openPreview({src:t.banner_url})},handleEdit:function(t){var e=this;Object.keys(t).forEach((function(a){e.formData[a]=t[a],"banner_url"==a&&(e.imgList=[{url:t[a]}])})),this.showEdit=!0}}},d=u,p=(a("97da"),a("2877")),f=Object(p["a"])(d,n,r,!1,null,"7617f579",null);e["default"]=f.exports},"97da":function(t,e,a){"use strict";var n=a("fc8d"),r=a.n(n);r.a},fc8d:function(t,e,a){}}]);