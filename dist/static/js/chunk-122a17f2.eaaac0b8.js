(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-122a17f2"],{"1b80":function(t,e,a){"use strict";a("8e6e"),a("ac6a"),a("456d");var i=a("bd86"),n=a("5f87"),o=a("2f62");function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var l=a("4328");e["a"]={data:function(){return{totalCount:0,pageSize:10,currPage:1,tableData:[],pageLoading:!0,totalPage:1,dataFilters:{}}},computed:s({},Object(o["c"])(["roles"])),methods:{getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dataFilters;return this.pageLoading=!0,new Promise((function(a,i){e=Object.assign({},e),void 0===e.page&&(e.page=t.currPage),void 0===e.page_num&&(e.page_num=t.pageSize),t.listApi(e).then((function(e){void 0!==e.code&&(t.tableData=e.data.data?e.data.data:[],t.setPagination(e.data.meta.pagination),t.pageLoading=!1),a(e)})).catch((function(e){t.pageLoading=!1,i(e)}))}))},setPagination:function(t){if(t){var e=t.total,a=t.per_page,i=t.current_page,n=t.total_pages;this.totalCount=e-0,this.pageSize=a-0,this.currPage=i-0,this.totalPage=n-0}},handleCurrentChange:function(t){return this.currPage=t,this.getList()},setDataFilters:function(t){this.$set(this,"dataFilters",t)},handleExport:function(t){var e=this,a=Object(n["a"])(),i=Object.assign({},this.dataFilters,{is_export:1}),o={responseType:"blob"};i.token=a,i=l.stringify(i),this.$http.post(t,i,o).then((function(t){var a,i=t.headers;a=i.exportexcelname?decodeURI(i.exportexcelname):"excel.xlsx",e.download(t.data,a)}))},download:function(t,e){if(t){var a=window.URL.createObjectURL(new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),i=document.createElement("a");i.style.display="none",i.href=a;var n=e||"excel.xlsx";i.setAttribute("download",n),document.body.appendChild(i),i.click()}},proxy_handleDelete:function(t,e,a){var i=this;this.$confirm("即将".concat(a||"删除该条记录",", 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i[e]&&i[e](t)})).catch((function(){}))}}}},3976:function(t,e,a){},"557a":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment-set-wrap page-wrap"},[t.showEdit?a("div",{staticClass:"page-inner video-set"},[a("p",{staticClass:"set-header page-header"},[t._v("\n            "+t._s("edit"==t.dialogType?"修改":"新增")+"精英课程\n        ")]),t._v(" "),a("div",{staticClass:"page-table"},[a("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.formRule,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"课程标题:",prop:"name"}},[a("el-input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"学科带头人:",prop:"academic_leader"}},[a("el-input",{model:{value:t.formData.academic_leader,callback:function(e){t.$set(t.formData,"academic_leader",e)},expression:"formData.academic_leader"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"上传图片:",prop:"thumbnail"}},[a("uploadImg",{attrs:{desc:"上传图片推荐尺寸：380×238",actionUrl:"/api"+t.apiList.feature_upload,files:t.imgList},model:{value:t.imgList,callback:function(e){t.imgList=e},expression:"imgList"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"课程详情",prop:"detail"}},[a("editorCom",{attrs:{options:t.editOptions},model:{value:t.formData.detail,callback:function(e){t.$set(t.formData,"detail",e)},expression:"formData.detail"}})],1)],1),t._v(" "),a("div",{staticClass:"subBtn-list"},[a("el-button",{attrs:{type:"success"},on:{click:t.handleSub}},[t._v("\n                    确定\n                ")]),t._v(" "),a("el-button",{attrs:{type:"info"},on:{click:function(e){t.showEdit=!1}}},[t._v("\n                   取消\n                ")])],1)],1)]):a("div",{staticClass:"common-set  page-inner"},[a("p",{staticClass:"set-header page-header"},[t._v("\n            精英课程设置\n        ")]),t._v(" "),a("div",{staticClass:"page-table"},[a("el-table",{attrs:{data:t.tableData,"header-row-class-name":"headrow","header-cell-class-name":"headrowcell"}},[a("el-table-column",{attrs:{prop:"id",label:"序号","header-align":"center",align:"center",width:"50px"}}),t._v(" "),a("el-table-column",{attrs:{label:"图片","header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"imgWrap img-item"},[a("img",{attrs:{src:e.row.thumbnail,alt:""}}),t._v(" "),a("p",{staticClass:"img-opt"},[a("span",{on:{click:function(a){return t.handlePictureCardPreview(e.row)}}},[a("i",{staticClass:"el-icon-zoom-in"})])])])]}}],null,!1,486317604)}),t._v(" "),a("el-table-column",{attrs:{label:"标题","header-align":"center",align:"center",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"学科带头人","header-align":"center",align:"center",prop:"academic_leader"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updated_at",label:"上传时间","header-align":"center",align:"center"}}),t._v(" "),t.hasEditPermission?a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center","min-width":"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleEdit(e.row,"edit")}}},[t._v("\n                      修改\n                    ")])]}}],null,!1,3348470497)}):t._e()],1)],1)])])},n=[],o=(a("456d"),a("ac6a"),a("cc96")),r=a("40cb"),s=a("60c5"),l=a("1b80"),c=a("5f87"),d=a("7c15"),u={name:"teacherSet",components:{editorCom:o["a"],uploadImg:r["a"],filterCom:s["a"]},mixins:[l["a"]],data:function(){var t=function(t,e,a){if(!e)return a(new Error("请填写信息"));a()};return{editOptions:{uploadJson:"/api"+d["a"].feature_upload+"?token="+Object(c["a"])()},imgList:[],videoList:[],listApi:d["b"].feature_list,filterOptions:[{label:"标题:",filed:"name",opt:"$like",options:[],defaultValue:"",type:"input",optionUrl:""},{label:"学科带头人:",filed:"academic_leader",opt:"$eq",options:[],defaultValue:"",type:"input",optionUrl:""}],teacherConfig:[],dialogType:"edit",pageType:"table",formData:{},formRule:{name:[{validator:t}],thumbnail:[{validator:t}],academic_leader:[{validator:t}],detail:[{validator:t}]},showEdit:!1,apiList:d["a"],gradeConfig:[],subjectConfig:[],typeConfig:[]}},mounted:function(){this.getList()},computed:{},methods:{handleDoSearch:function(t){this.setDataFilters(t),this.getList()},handleDelete:function(t){var e=this;d["b"].teacher_delete({id:t}).then((function(t){e.showEdit=!1,e.getList(),e.$appmessage({type:"success",message:t.message||"删除成功"})}))},getOptions:function(){var t=this;d["b"].video_config().then((function(e){var a=e.data,i=a.gradeConfig,n=a.subjectConfig,o=a.typeConfig;t.gradeConfig=i,t.subjectConfig=n,t.typeConfig=o,t.filterOptions[0].options=i,t.filterOptions[1].options=n,t.filterOptions[2].options=o}))},handleSub:function(){var t=this,e=this.imgList[0]?this.imgList[0].url:"";this.$set(this.formData,"thumbnail",e);var a=this.videoList[0]?this.videoList[0].url:"";this.$set(this.formData,"url",a),this.$refs.formData.validate((function(i){if(i){var n=JSON.parse(JSON.stringify(t.formData));n.thumbnail=e,n.url=a,d["b"].feature_save(n).then((function(e){t.showEdit=!1,t.getList(),t.$appmessage({type:"success",message:e.message||"保存成功"})}))}}))},handlePictureCardPreview:function(t){this.openPreview({src:t.thumbnail})},handleEdit:function(t,e){var a=this;if(this.dialogType=e,"add"==e)return this.formData={},this.imgList=[],this.videoList=[],void(this.showEdit=!0);Object.keys(t).forEach((function(e){a.$set(a.formData,e,t[e]),"thumbnail"==e&&(t[e]?a.imgList=[{url:t[e]}]:a.imgList=[]),"url"==e&&(t[e]?a.videoList=[{url:t[e]}]:a.videoList=[]),"teacher_id"==e&&(a.teacherConfig=[{id:t[e],value:t["teacherName"]}])})),this.showEdit=!0}}},p=u,f=(a("f308"),a("2877")),m=Object(f["a"])(p,i,n,!1,null,"e13918cc",null);e["default"]=m.exports},f308:function(t,e,a){"use strict";var i=a("3976"),n=a.n(i);n.a}}]);